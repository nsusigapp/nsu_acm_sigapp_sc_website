<!DOCTYPE html>
<html lang="en">

<head>
    <%- include includes/meta.ejs  %>
    <title><%= pageTitle %></title>
</head>

<body>
    <%- include includes/header.ejs  %>

    <main class="main-content-post-view">

        <% if (!blogExists) { %>
            <h1 style="color: crimson;text-align: center; margin: 20rem 0rem;">The blog you're looking for does not exist!</h1>
        <% } else { %>

            <div class="main-post-content-wrapper">

                <div class="main-post--left">

                    <div class="main-blog-cover">
                        <img class="main-blog-cover--img" src="/images/state.png" alt="">
                    </div>

                    <h1 class="main-blog--title">
                        Setting Cache-Control header for all Amazon S3 objects
                    </h1>

                    <div class="main-blog--content margin-top-small">
                        <p class="main-blog--content--paragraph">
                            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Commodi repellat excepturi officia ex
                            sed explicabo voluptates aliquid praesentium cupiditate reiciendis, suscipit voluptate et
                            doloremque unde? Hic doloribus distinctio tempora quod nisi sunt? Enim vel repellat error
                            aliquid? Sed, debitis voluptas aliquid commodi sunt, facere, cupiditate dolorem officiis iste
                            est suscipit.
                        </p>
                    </div>
                </div>

                <div class="main-post--right">
                    <div class="post-user-card">

                        <div class="post-user-card--author">

                            <div class="post-user-card--author-info">

                                <img src="/images/abir-pp.jpg" alt="profile-picture"
                                    class="post-user-card--author-info--img">
                                <div class="post-user-card--author-info-name-box">
                                    <p class="post-user-card--author-info-name-box--name">
                                        Abir Rahman
                                    </p>
                                    <a href="/" class="post-user-card--author-info-name-box--user-name">
                                        @SpaceKnight69
                                    </a>
                                </div>

                            </div>

                            <p class="post-user-card--author-publish-date margin-top-small margin-gutter-small">
                                Posted On, 21st Feb, 2019
                            </p>

                            <h4 class="secondary-small-title">Categories</h4>

                            <div class="tag-pills-box margin-gutter-small">
                                <% tags.forEach(tag => { %>
                                    <span class="tag-pills-box--pills">
                                        <%= tag %>
                                    </span>
                                <% }); %>
                            </div>
                        </div>

                        <% if (userInfo.loggedIn) { %>
                            <div class="post-user-card-action-box margin-top-small">
                                <div class="action-icon-box">
                                    <img class="action-icon-box--icon like-icon" src="/images/star.svg" alt="like-btn">
                                    <span class="action-icon-box--count">12</span>
                                </div>

                                <div class="action-icon-box">
                                    <img class="action-icon-box--icon" src="/images/question.svg" alt="comment-count">
                                    <span class="action-icon-box--count">3</span>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>

            </div>

            <div class="answer-wrapper margin-top-medium">
                <div class="main-post--answer-box">
                    <div class="post-reply-box">
                        <h2 class="post-reply-box--title">
                            Comments
                        </h2>
                        <div class="post-reply-box--editor margin-top-small margin-gutter-small">

                            <% if (userInfo.loggedIn) { %>
                                <form action="/post-answer" method="POST" class="clearfix">
                                    <textarea name="answer_content" id="answereditor"></textarea>
                                    <input type="hidden" name="postId" value="<%= post.f_post_id %>">
                                    <input class="post-reply-btn" value="Post Answer" type="submit">
                                </form>
                            <% } else { %>
                                <h2 style="color: #374353;">Please Log In To Answer Questions </h2>
                            <% } %>

                        </div>
                        <div class="post-reply-box--reply-container">
                            <% comments.forEach(comment => { %>
                                <div class="post-reply-box--reply-container--reply">
                                    <div class="post-reply-box--reply-container--reply-username">
                                        <a href="/" class="reply-author-link">
                                            @<%= comment["user.user_name"]  %> - <%= dateFormat(comment.createdAt) %>
                                        </a>
                                        <span class="reply-link">Reply</span>
                                    </div>
                                    <p class="post-content">
                                        <%- comment.com_content %>
                                    </p>
                                </div>
                            <%  }); %>
            
                        </div>
                    </div>
                </div>
                <div style="flex: 1;"></div>
            </div>
        <% } %>

    </main>

    <%- include includes/footer.ejs %>

    <script src="/js/axios.js"></script>
</body>

</html>