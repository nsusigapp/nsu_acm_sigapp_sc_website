<!DOCTYPE html>
<html lang="en">
<head>
    <%- include includes/meta.ejs  %>
    <title><%= pageTitle %></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/5.0.5/tinymce.min.js"></script>
    <script>
        tinymce.init({
            oninit : "setPlainText",
            selector: '#answereditor',
            plugins : 'advlist paste autolink link image lists charmap print preview autoresize',
            toolbar: 'undo redo | styleselect | bold italic | link image',
            image_caption: true,
            image_description: false
        });
    </script>
</head>
<body>
    <%- include includes/header.ejs  %>

    <main class="main-content-post-view">

        <div class="main-post-content-wrapper">

            <div class="main-post--left">
                <h1 class="main-post--title">
                    # <%= post.f_post_title %>
                </h1>

                <div class="main-post--content margin-top-small">
                    <p class="main-post--content--paragraph">
                        <%= post.f_post_description %>
                    </p>
                </div>
            </div>

            <div class="main-post--right">
                <div class="post-user-card">

                    <div class="post-user-card--author">
    
                        <div class="post-user-card--author-info">
    
                            <img src="/images/abir.jpg" alt="profile-picture" class="post-user-card--author-info--img">
                            <div class="post-user-card--author-info-name-box">
                                <p class="post-user-card--author-info-name-box--name">
                                    <%= post["user.first_name"] %> <%= post["user.last_name"] %>
                                </p>
                                <a href="/" class="post-user-card--author-info-name-box--user-name">
                                    @<%= post["user.user_name"] %>
                                </a>
                            </div>

                        </div>

                        <p class="post-user-card--author-publish-date margin-top-small margin-gutter-small">
                            Posted On, <%= dateFormat(post.createdAt) %>
                        </p>

                        <h4 class="secondary-small-title">Categories</h4>

                        <div class="tag-pills-box margin-gutter-small">

                            <% tags.forEach(tag => { %>
                                <span class="tag-pills-box--pills">
                                    <%= tag %>
                                </span>
                            <% }); %>
                        </div>
                    </div>
    
                    <div class="post-user-card-action-box margin-top-small">
                        <div class="action-icon-box">
                            <img onclick="likePost(<%= post.f_post_id  %>, action)" class="action-icon-box--icon like-icon" src="/images/star.svg" alt="like-btn">
                            <span class="action-icon-box--count"><%= post.like_count %></span>
                        </div>

                        <div class="action-icon-box">
                            <img class="action-icon-box--icon" src="/images/question.svg" alt="comment-count">
                            <span class="action-icon-box--count"><%= answers.length %></span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="answer-wrapper margin-top-medium">
            <div class="main-post--answer-box">
                <div class="post-reply-box">
                    <h2 class="post-reply-box--title">
                        Answers
                    </h2>
                    <div class="post-reply-box--editor margin-top-small margin-gutter-small">

                        <form action="/" class="clearfix">
                            <textarea name="" id="answereditor"></textarea>
                            <input class="post-reply-btn" value="Post Answer" type="submit">
                        </form>

                    </div>
                    <div class="post-reply-box--reply-container">
    
                        <% answers.forEach(answer => { %>
                            <div class="post-reply-box--reply-container--reply">
                                <div class="post-reply-box--reply-container--reply-username">
                                    <a href="/" class="reply-author-link">
                                        @<%= answer["user.user_name"]  %> - <%= dateFormat(answer.createdAt) %>
                                    </a>
                                    <span class="reply-link">Reply</span>
                                </div>
                                <p class="post-content">
                                    <%= answer.answer_content %>
                                </p>
                            </div>
                        <%  }); %>
    
                    </div>
                </div>
            </div>
            <div style="flex: 1;"></div>
        </div>

    </main>

    <%- include includes/footer.ejs %>

</body>

</html>